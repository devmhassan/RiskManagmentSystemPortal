<div class="risk-information">
  <h2>Risk Information</h2>
  <p class="subtitle">Enter the basic information about the risk</p>

  <form [formGroup]="basicInfoForm" class="form-container">
    <div class="form-row">
      <div class="form-group">
        <label for="riskId">Risk ID <span class="required">*</span></label>
        <input id="riskId" type="text" formControlName="riskId" class="form-control" 
               maxlength="10" placeholder="e.g., IT-2024">
        <div class="error-message" *ngIf="riskIdInvalid">
          <span *ngIf="basicInfoForm.get('riskId')?.errors?.['required']">Risk ID is required</span>
        </div>
      </div>

      <div class="form-group">
        <label for="status">Status <span class="required">*</span></label>
        <select id="status" class="form-control" formControlName="status">
          <option *ngFor="let option of riskStatusOptions" [value]="option.value">
            {{option.key}}
          </option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Risk Description <span class="required">*</span></label>
      <textarea id="description" formControlName="description" class="form-control" rows="3" 
                maxlength="500" placeholder="Describe the risk in detail..."></textarea>
      <div class="error-message" *ngIf="descriptionInvalid">
        <span *ngIf="basicInfoForm.get('description')?.errors?.['required']">Risk description is required</span>
        <span *ngIf="basicInfoForm.get('description')?.errors?.['minlength']">Description must be at least 10 characters</span>
        <span *ngIf="basicInfoForm.get('description')?.errors?.['maxlength']">Description cannot exceed 500 characters</span>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="businessDomainId">Business Domain <span class="required">*</span></label>
        <select id="businessDomainId" formControlName="businessDomainId" class="form-control">
          <option value="">Select a business domain</option>
          <option *ngFor="let domain of businessDomains" [value]="domain.id">{{domain.name}}</option>
        </select>
        <div class="error-message" *ngIf="basicInfoForm.get('businessDomainId')?.touched && basicInfoForm.get('businessDomainId')?.errors?.['required']">
          Business domain is required
        </div>
      </div>

      <div class="form-group">
        <label for="riskOwner">Risk Owner (Email) <span class="required">*</span></label>
        <input id="riskOwner" type="email" formControlName="riskOwner" class="form-control" 
               placeholder="risk.owner@company.com">
        <div class="error-message" *ngIf="riskOwnerInvalid">
          <span *ngIf="basicInfoForm.get('riskOwner')?.errors?.['required']">Risk owner email is required</span>
          <span *ngIf="basicInfoForm.get('riskOwner')?.errors?.['email']">Please enter a valid email address</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group col-6">
        <label for="reviewDate">Review Date <span class="required">*</span></label>
        <input id="reviewDate" type="date" formControlName="reviewDate" class="form-control" [min]="minDate">
        <div class="error-message" *ngIf="reviewDateInvalid">
          <span *ngIf="basicInfoForm.get('reviewDate')?.errors?.['required']">Review date is required</span>
          <span *ngIf="basicInfoForm.get('reviewDate')?.errors?.['pastDate']">Review date cannot be in the past</span>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Trigger Events <span class="required">*</span></label>
      <div class="trigger-events-container">
        <div class="trigger-input-group">
          <input id="triggerEventInput" type="text" formControlName="triggerEventInput" class="form-control"
                 maxlength="100" placeholder="Event that would trigger this risk...">
          <button type="button" class="btn-add" (click)="addTriggerEvent()" 
                  [disabled]="!basicInfoForm.get('triggerEventInput')?.value?.trim()">
            Add
          </button>
        </div>
        <div class="trigger-events-list" *ngIf="triggerEvents.length > 0">
          <div *ngFor="let event of triggerEvents; let i = index" class="trigger-event-item">
            <span>{{event}}</span>
            <button type="button" class="btn-remove" (click)="removeTriggerEvent(i)">Ã—</button>
          </div>
        </div>
        <div class="error-message" *ngIf="triggerEvents.length === 0 && basicInfoForm.touched">
          At least one trigger event is required
        </div>
      </div>
    </div>

    <!-- Form validation summary -->
    <div class="form-summary" *ngIf="!isFormValid() && basicInfoForm.touched">
      <div class="alert alert-warning">
        <strong>Please complete all required fields before proceeding.</strong>
      </div>
    </div>
  </form>
</div>
